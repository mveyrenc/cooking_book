<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
  <meta charset="utf-8">
  <title><%= I18n.t 'application.name' %></title>
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
  <%= stylesheet_link_tag 'print', media: 'print', 'data-turbolinks-track': 'reload' %>
  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
  <%= javascript_include_tag "https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js", "https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js" %>
  <![endif]--></head>
<body>
<nav class="navbar is-primary is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="navbar-brand">
      <%= link_to root_path, :class => "navbar-item" do
        content_tag( :span, I18n.t('application.name'), { :class => "button is-primary is-inverted has-text-weight-bold is-large"} )
      end %>
      <div class="navbar-burger burger" data-target="main-navbar-menu">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
    <div id="main-navbar-menu" class="navbar-menu">
      <div class="navbar-start">
        <% if user_signed_in? %>
          <%= link_to t('menu.recipes'), recipes_path, class: "navbar-item" %>
          <% if can? :create, Recipe %>
            <%= link_to new_recipe_path, :class => 'navbar-item', :title => I18n.t('recipes.new_button') do
              content_tag( :span, I18n.t('recipes.new_button'), { :class => "button is-primary is-inverted is-rounded"} )
            end %>
            <div class="navbar-item has-dropdown is-hoverable">
              <a href="#" class="navbar-link"><%= I18n.t('recipes.import_button') %></a>
              <div class="navbar-dropdown">
                <%= link_to I18n.t('recipes.import_regal'), new_import_recipe_regal_path, class: "navbar-item" %>
                <%= link_to I18n.t('recipes.import_meilleurduchef'), new_import_recipe_meilleurduchef_path, class: "navbar-item" %>
                <%= link_to I18n.t('recipes.import_elleatable'), new_import_recipe_elleatable_path, class: "navbar-item" %>
              </div>
            </div>
          <% end %>
          <% if can? :read, Category %>
            <%= link_to t('menu.categories'), categories_path, class: "navbar-item" %>
          <% end %>
          <% if can? :read, Ingredient %>
            <%= link_to t('menu.ingredients'), ingredients_path, class: "navbar-item" %>
          <% end %>
          <% if can? :read, Source %>
            <%= link_to t('menu.sources'), sources_path, class: "navbar-item" %>
          <% end %>
          <% if can? :manage, User %>
            <%= link_to t('menu.users'), users_path, class: "navbar-item" %>
          <% end %>
        <% end %>
      </div>
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a href="#" class="navbar-link"><strong><%= current_user.name %></strong> (<%= current_user.role %>)</a>
          <div class="navbar-dropdown">
            <%= link_to t('devise.label.edit_profile'), edit_user_registration_path, class: "navbar-item" %>
            <%= link_to t('devise.label.logout'), destroy_user_session_path, method: :delete, class: "navbar-item" %>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>
<main>
  <% flash.each do |name, msg| %>
    <%= content_tag :div, :class => "notification is-" + name do %>
      <button class="delete"></button>
      <%= msg %>
    <% end %>
  <% end %>
  <%= yield %>
</main>
</body>
</html>
